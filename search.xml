<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>搭建饥荒服务器</title>
      <link href="/2021/11/28/%E6%90%AD%E5%BB%BA%E9%A5%A5%E8%8D%92%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2021/11/28/%E6%90%AD%E5%BB%BA%E9%A5%A5%E8%8D%92%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p>服务器镜像：centos7.6</p></blockquote><h2 id="服务器相关文件准备"><a href="#服务器相关文件准备" class="headerlink" title="服务器相关文件准备"></a>服务器相关文件准备</h2><h3 id="建立游戏服务器文件夹"><a href="#建立游戏服务器文件夹" class="headerlink" title="建立游戏服务器文件夹"></a>建立游戏服务器文件夹</h3><p>在客户端建立一个在线的新世界，按照自己的喜好勾选配置 mod，调整世界参数，创建世界连接成功后退出，会生成对应的服务器文件夹如<code>Cluster_1</code>。</p><p><img src="https://gitee.com/xuny999/FigureBed/raw/master/blog_img/202111291013245.jpg" alt="Snipaste_2021-11-29_10-13-03"></p><p>在游戏主页左下方数据按钮可以找到也即自己的存档位置。</p><h3 id="获取cluster-token"><a href="#获取cluster-token" class="headerlink" title="获取cluster_token"></a>获取cluster_token</h3><p>为确保游戏服务器能24小时在线，饥荒桌面客户端的自建本地服务器密钥需要更换为官方长期有效版。</p><p>主页点击进入账号选项，即会打开steam内置浏览器，按照下图指引，记下<code>klei用户ID</code>。</p><p><img src="https://gitee.com/xuny999/FigureBed/raw/master/blog_img/202111291025113.jpg" alt="Snipaste_2021-11-29_10-25-38"></p><p>在网页顶部导航栏进入游戏选项卡，找到饥荒服务器新建一个<code>cluster_token</code>并复制好。</p><p><img src="https://gitee.com/xuny999/FigureBed/raw/master/blog_img/202111291023595.jpg" alt="Snipaste_2021-11-29_10-23-03"></p><p>对之前创建好的饥荒服务器文件夹<code>Cluster_1</code>中的<code>cluster_token.txt</code>内的密钥进行替换。</p><h3 id="mod管理和管理员添加"><a href="#mod管理和管理员添加" class="headerlink" title="mod管理和管理员添加"></a>mod管理和管理员添加</h3><p>新建mod安装管理文件<code>dedicated_server_mods_setup.lua</code>，格式如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ServerModSetup(&quot;378160973&quot;)</span><br><span class="line">ServerModSetup(&quot;666155465&quot;)</span><br><span class="line">ServerModSetup(&quot;922251350&quot;)</span><br></pre></td></tr></table></figure><p>其中括号中的数字为对应的mod的ID，ID可在浏览创意工坊时steam内置浏览器地址栏找到，保存至文件夹备用。此配置文件为mod安装更新使用，<strong>务必确保在先前创建的存档文件中所勾选的mod的ID引入此处</strong>，否则无法加载正常mod。</p><p>新建管理员名单<code>adminlist.txt</code>，将先前记录下的<code>klei用户ID</code>填入，若需添加多个管理员，将用户对应的<code>klei用户ID</code>分别换行填入即可。将<code>adminlist.txt</code>移至刚刚创建好的<code>Cluster_1</code>文件夹。</p><p><img src="https://gitee.com/xuny999/FigureBed/raw/master/blog_img/202111291033297.png" alt="image-20211129103311163"></p><h2 id="服务器安装和配置"><a href="#服务器安装和配置" class="headerlink" title="服务器安装和配置"></a>服务器安装和配置</h2><h3 id="连接服务器"><a href="#连接服务器" class="headerlink" title="连接服务器"></a>连接服务器</h3><p>输入服务器公网 IP 以管理员身份连接服务器</p><ul><li>新建用户</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd klei</span><br></pre></td></tr></table></figure><ul><li>设置密码</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd klei</span><br></pre></td></tr></table></figure><blockquote><p>以上步骤创建一个普通用户是为了更好地专门管理饥荒服务器</p></blockquote><h3 id="游戏安装"><a href="#游戏安装" class="headerlink" title="游戏安装"></a>游戏安装</h3><h4 id="STEAMCMD安装"><a href="#STEAMCMD安装" class="headerlink" title="STEAMCMD安装"></a>STEAMCMD安装</h4><ul><li>在终端命令行下操作，安装必要依赖组件</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install glibc.i686 libstdc++.i686 libcurl.i686 --<span class="built_in">setopt</span>=protected_multilib=<span class="literal">false</span> </span><br><span class="line"> <span class="comment">#安装依赖库（针对centos64位系统，设置多库设置多库保护关闭）</span></span><br></pre></td></tr></table></figure><ul><li>安装 screen 工具，以实现洞穴/地上切换</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install screen</span><br></pre></td></tr></table></figure><ul><li>安装 steamcmd</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mkdir steamcmd   <span class="comment">#建立一个新文件夹</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ./steamcmd   <span class="comment">#进入创建好的文件夹</span></span><br><span class="line"></span><br><span class="line">wget https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz   <span class="comment">#下载相应的安装包</span></span><br><span class="line"></span><br><span class="line">tar -xvzf steamcmd_linux.tar.gz   <span class="comment">#解压</span></span><br><span class="line"></span><br><span class="line">./steamcmd.sh   <span class="comment">#执行命令</span></span><br></pre></td></tr></table></figure><blockquote><p>执行<code>./steamcmd.sh</code>未成功可能没有安装32位运行库，执行 <code>yum install xulrunner.i686</code></p></blockquote><p>以上命令依次输入执行，运行成功后在终端提示变为<code>Steam&gt;</code>即为成功（提示 SDL not found 可以不予理会）。</p><h4 id="饥荒服务端安装"><a href="#饥荒服务端安装" class="headerlink" title="饥荒服务端安装"></a>饥荒服务端安装</h4><p>在上一步 Steam 会话中下载安装饥荒游戏服务器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">login anonymous   <span class="comment">#匿名登录</span></span><br><span class="line">app_update 343050 validate   <span class="comment">#饥荒服务端安装</span></span><br></pre></td></tr></table></figure><blockquote><p>由于网络问题可能需要等上一段时间，不行就中断后再试，直到提示安装成功，输入<code>quit</code>或<code>ctrl</code>+<code>c</code>退出steam会话。</p><p>如果没有设置强制安装到指定目录，正常情况是安装在<code>/klei/Steam/steamapps/common/Don&#39;t Starve Together Dedicated Server</code>，此时我们需要返回到该目录并试运行饥荒服务器。</p><p>添加centos下缺少的一个库的代替，并试运行。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~   <span class="comment">#返回根目录</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> Steam/steamapps/common/<span class="string">&quot;Don&#x27;t Starve Together Dedicated Server&quot;</span>/bin   <span class="comment">#注意加上转义引号 </span></span><br><span class="line"></span><br><span class="line">ln -s /usr/lib/libcurl.so.4 /usr/lib/libcurl-gnutls.so.4   <span class="comment">#添加缺失的依赖</span></span><br><span class="line"></span><br><span class="line">./dontstarve_dedicated_server_nullrenderer   <span class="comment">#试运行</span></span><br></pre></td></tr></table></figure><blockquote><p>当提示如下图所示即为安装成功，若启动不成功可以使用命令 <code>dd ./dontstarve_dedicated_server_nullrenderer</code> 来查看程序缺少的动态链接库。</p><p><img src="https://gitee.com/xuny999/FigureBed/raw/master/blog_img/202111281809251.png" alt="image-20211128180904068"></p><p>按住<code>Ctrl</code>+<code>c</code> 键以关闭饥荒服务端会话窗口或者在该会话窗口输入 <code>c_shutdown()</code> 来关闭。</p></blockquote><h4 id="游戏文件配置"><a href="#游戏文件配置" class="headerlink" title="游戏文件配置"></a>游戏文件配置</h4><p>将准备好的本地游戏文件夹<code>Cluster_1</code>上传至服务器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span>  /home/klei/.klei/DoNotStarveTogether   <span class="comment">#移至饥荒存档目录</span></span><br><span class="line">rm -rf Cluster_1   <span class="comment">#删除试运行时系统自动生成的存档</span></span><br></pre></td></tr></table></figure><p><code>Caves</code>和<code>Master</code>分别对应洞穴和地上世界，其内含的<code>modoverrides.lua</code>为对应各自世界的mod配置选项，该文件决定了mod的启用与参数调整。</p><p>  类似的操作将服务器<code>/home/klei/Steam/steamapps/common/Don&#39;t Starve Together Dedicated Server/mods</code>上的mod安装管理文件<code>dedicated_server_mods_setup.lua</code>先删除再上传本地的。也可以不删除直接在VScode编辑修改或TERMINAL终端使用<code>vi</code>命令修改。最近klei更mod架构后，新版v2架构的mod会被放在游戏安装目录的<code>ugc_mods</code>文件夹中。</p><p>  完成后如下在TERMINAL终端输入指令启动游戏服务器稍加等待，当会话窗口提示sim paused即为完成，客户端尝试连接（此时只会启动地上世界），成功进入后在TERMINAL终端关闭（同时按住<code>Ctrl</code>+<code>c</code>）。此时默认运行Cluster_1存档，且只会运行地上世界，正式启动游戏服务器可关闭后使用下文重启脚本。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/klei/Steam/steamapps/common/<span class="string">&quot;Don&#x27;t Starve Together Dedicated Server&quot;</span>/bin   <span class="comment">#注意加上转义引号 </span></span><br><span class="line">./dontstarve_dedicated_server_nullrenderer  <span class="comment">#运行</span></span><br></pre></td></tr></table></figure><h2 id="游戏服务器运行"><a href="#游戏服务器运行" class="headerlink" title="游戏服务器运行"></a>游戏服务器运行</h2><h3 id="创建更新重启脚本"><a href="#创建更新重启脚本" class="headerlink" title="创建更新重启脚本"></a>创建更新重启脚本</h3><p>为方便游戏后期更新需要创建更新重启脚本，在刚刚的TERMINAL终端输入<code>cd</code>命令移动至root用户的home directory，再输入<code>vi dst_update.sh</code>创建一个名为<code>dst.sh</code>的脚本文件，TERMINAL终端会话框会进入vi模式，按键盘的<code>insert</code>键，进入vi编辑模式，使用方向键移动光标，输入下列指令代码，再按<code>esc</code>进入vi命令行模式，输入<code>:wq</code>，保存并退出。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">pkill screen </span><br><span class="line"><span class="comment">#关闭当前游戏服务器</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /root/steamcmd</span><br><span class="line"></span><br><span class="line">./steamcmd.sh +login anonymous +app_update 343050 validate +quit</span><br><span class="line"><span class="comment">#steamcmd进行游戏更新    </span></span><br></pre></td></tr></table></figure><p>类似的新建重启脚本<code>dst_restart.sh</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">pkill screen</span><br><span class="line"><span class="comment">#关闭当前游戏服务器</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /home/klei/Steam/steamapps/common/<span class="string">&quot;Don&#x27;t Starve Together Dedicated Server&quot;</span>/bin</span><br><span class="line"><span class="comment">#移至饥荒安装目录</span></span><br><span class="line"></span><br><span class="line">screen -S dst1 -d -m  ./dontstarve_dedicated_server_nullrenderer -cluster Cluster_1 -console -shard Master</span><br><span class="line"><span class="comment">#利用screen命令静默启动地上世界</span></span><br><span class="line"><span class="comment">#更改文件夹名称Cluster_1即可更改欲启动的不同存档文件夹。</span></span><br><span class="line"></span><br><span class="line">screen -S dst2 -d -m  ./dontstarve_dedicated_server_nullrenderer -cluster Cluster_1 -console -shard Caves</span><br><span class="line"><span class="comment">#利用screen命令静默启动洞穴世界 </span></span><br></pre></td></tr></table></figure><p>  注：当无法启动时可使用<code>screen -r dst1</code>用于恢复地上世界会话至前台查看报错信息，使用<code>screen -d dst1</code>将地上世界会话切换至后台。</p><p>  给脚本文件赋权</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod u+x dst_update.sh &amp; chmod u+x dst_restart.sh</span><br></pre></td></tr></table></figure><p>  之后每次游戏需要更新都可以执行该脚本来完成（mod更新只需要执行重启脚本）以新建的TERMINAL终端默认root用户为例，如下即可完成，所以也可以在移动设备完成（这里安利下baye的APP<code>servercat</code>）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd</span><br><span class="line">./dst.sh</span><br><span class="line">./dst0.sh</span><br></pre></td></tr></table></figure><h3 id="后期mod添加"><a href="#后期mod添加" class="headerlink" title="后期mod添加"></a>后期mod添加</h3><p>  玩饥荒mod时必不可少的，前文已经解决了如何在本地设置好mod配置文件。当游戏服务器上线后想添加新的或禁用某个mod，可以通过修改服务器<code>Cluster_1</code>中的地上世界和洞穴世界文件夹中的两个<code>modoverrides.lua</code>中”return｛ “后面添加上mod描述如<code>[&quot;workshop-375850593&quot;] = &#123; enabled = true &#125;,</code>禁用的话改为false即可。</p><p>  将服务器<code>/home/klei/Steam/steamapps/common/Don&#39;t Starve Together Dedicated Server/mods</code>中的mod安装管理文件<code>dedicated_server_mods_setup.lua</code>中添加上<code>ServerModSetup(&quot;375850593&quot;)</code>，最后使用重启脚本<code>dst0.sh</code>即可完成mod的添加启用。值得注意的时最近的版本更新使得该mod安装管理文件每次游戏更新后重置，也不知道以后的版本会不会改，建议将<code>dedicated_server_mods_setup.lua</code>文件做好备份以便更新后备用。</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://forums.kleientertainment.com/forums/topic/64441-dedicated-server-quick-setup-guide-linux/">klei官方教程</a></p><p><a href="https://sumygg.com/2016/01/24/install-and-configure-dont-starve-together-server-on-centos/">CentOS下安装和配置饥荒联机版服务器 | SumyBlog</a></p><p><a href="https://zhuanlan.zhihu.com/p/25831490">饥荒联机版 Linux 服务器（地上世界与地下世界）搭建 - 知乎</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 饥荒 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly主题美化日记</title>
      <link href="/2021/11/24/Butterfly%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E6%97%A5%E8%AE%B0/"/>
      <url>/2021/11/24/Butterfly%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E6%97%A5%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Butterfly 主题<a href="https://butterfly.js.org/">官方中文文档</a></p></blockquote><h2 id="本地搜索"><a href="#本地搜索" class="headerlink" title="本地搜索"></a>本地搜索</h2><ul><li>安裝<code>hexo-generator-search</code>，格式只支持 <strong>xml</strong>。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><ul><li>修改主题配置文件</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="副标题打字机效果"><a href="#副标题打字机效果" class="headerlink" title="副标题打字机效果"></a>副标题打字机效果</h2><ul><li>修改主题配置文件</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># the subtitle on homepage (主頁subtitle)</span></span><br><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Typewriter Effect (打字效果)</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># loop (循環打字)</span></span><br><span class="line">  <span class="attr">loop:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># source調用第三方服務</span></span><br><span class="line">  <span class="comment"># source: false 關閉調用</span></span><br><span class="line">  <span class="comment"># source: 1  調用搏天api的隨機語錄（簡體）</span></span><br><span class="line">  <span class="comment"># source: 2  調用一言網的一句話（簡體）</span></span><br><span class="line">  <span class="comment"># source: 3  調用一句網（簡體）</span></span><br><span class="line">  <span class="comment"># source: 4  調用今日詩詞（簡體）</span></span><br><span class="line">  <span class="comment"># subtitle 會先顯示 source , 再顯示 sub 的內容hex</span></span><br><span class="line">  <span class="attr">source:</span> <span class="number">2</span></span><br><span class="line">  <span class="comment"># 如果有英文逗號&#x27; , &#x27;,請使用轉義字元 &amp;#44;</span></span><br><span class="line">  <span class="comment"># 如果有英文雙引號&#x27; &quot; &#x27;,請使用轉義字元 &amp;quot;</span></span><br><span class="line">  <span class="comment"># 開頭不允許轉義字元，如需要，請把整個句子用雙引號包住</span></span><br><span class="line">  <span class="comment"># 如果關閉打字效果，subtitle只會顯示sub的第一行文字</span></span><br><span class="line">  <span class="attr">sub:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">世界上只有一种英雄主义，就是看清生活的真相之后，依然热爱生活。</span></span><br></pre></td></tr></table></figure><blockquote><p>source 第三方接口的 相关配置参数可以在 <code>~butterfly\layout\includes\third-party\subtitle.pug</code>文件中修改</p></blockquote><h2 id="RSS订阅"><a href="#RSS订阅" class="headerlink" title="RSS订阅"></a>RSS订阅</h2><ul><li>安装<code>hexo-generator-feed</code>插件</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><ul><li>修改主题配置文件</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># social settings (社交圖標設置)</span></span><br><span class="line"><span class="comment"># formal:</span></span><br><span class="line"><span class="comment">#   icon: link || the description</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">    <span class="attr">fas fa-rss:</span> <span class="string">/atom.xml</span></span><br></pre></td></tr></table></figure><h2 id="樱花飘落效果"><a href="#樱花飘落效果" class="headerlink" title="樱花飘落效果"></a>樱花飘落效果</h2><p>前提：樱花飘落效果的 <a href="https://yremp.live/wp-content/uploads/resource/js/sakura.js">JS 文件</a></p><ul><li><p>将下载好的JS文件放在<code>~\Butterfly\source\js</code>文件夹下</p></li><li><p>在<code>~\Butterfly\layout\includes</code>文件夹下找到<code>head.pug</code>文件，在最后引入</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> theme.sakura.enable</span><br><span class="line">script(src=<span class="string">&quot;/js/sakura.js&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li>在主题的主配置文件加入</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 页面樱花飘落动效</span></span><br><span class="line"><span class="attr">sakura:</span></span><br><span class="line"><span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="字数统计"><a href="#字数统计" class="headerlink" title="字数统计"></a>字数统计</h2><ul><li>安装<code>hexo-wordcount</code>插件</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-wordcount --save</span><br></pre></td></tr></table></figure><ul><li>修改主题配置文件</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wordcount (字數統計)</span></span><br><span class="line"><span class="attr">wordcount:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_wordcount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_wordcount:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Hexo应用笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo入门</title>
      <link href="/2021/11/24/Hexo%E5%85%A5%E9%97%A8/"/>
      <url>/2021/11/24/Hexo%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>Hexo官方</strong><a href="https://hexo.io/zh-cn/docs/">中文说明文档</a></p></blockquote><h2 id="Hexo环境搭建"><a href="#Hexo环境搭建" class="headerlink" title="Hexo环境搭建"></a>Hexo环境搭建</h2><p>Hexo所需要的的应用程序</p><ol><li><p>Node.js</p></li><li><p>Git</p></li></ol><h3 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h3><ul><li>node.js <a href="https://nodejs.org/en/">官方下载地址</a></li></ul><p>查看node版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure><p>查看npm版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm -v</span><br></pre></td></tr></table></figure><p>两行命令验证是否安装成功</p><p><img src="https://gitee.com/xuny999/FigureBed/raw/master/blog_img/202111232248786.png" alt="202111092313824"></p><h3 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h3><ul><li>git <a href="https://git-scm.com/">官方下载地址</a></li></ul><h2 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h2><ul><li>使用<code>npm</code>安装 Hexo</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>安装以后，可以使用以下两种方式执行 Hexo：</p><p>1.<code>npx hexo &lt;command&gt;</code></p><ol start="2"><li>将 hexo.cmd 所在的目录 node_global 添加到<strong>环境变量</strong>之中即可直接使用<code>hexo &lt;command&gt;</code></li></ol><ul><li>查看 hexo 版本</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/xuny999/FigureBed/raw/master/blog_img/202111232255000.png" alt="202111092314165"></p><h2 id="创建博客"><a href="#创建博客" class="headerlink" title="创建博客"></a>创建博客</h2><ul><li>新建一个文件夹blog并对其初始化（<strong>管理员身份</strong>）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">hexo init</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/xuny999/FigureBed/raw/master/blog_img/202111232300211.png" alt="202111092315556"></p><p>生成以下文件和目录</p><p><img src="https://gitee.com/xuny999/FigureBed/raw/master/blog_img/202111240032828.png" alt="202111092321772"></p><ul><li>启动本地博客服务</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/xuny999/FigureBed/raw/master/blog_img/202111232303307.png" alt="202111092311831"></p><ul><li>输入<code>http://localhost:4000</code>默认地址本地访问</li></ul><p><img src="https://gitee.com/xuny999/FigureBed/raw/master/blog_img/202111232303043.png" alt="202111092317049"></p><h2 id="安装Butterfly主题"><a href="#安装Butterfly主题" class="headerlink" title="安装Butterfly主题"></a>安装Butterfly主题</h2><blockquote><p>Butterfly 主题是我当前使用的 Hexo 博客主题</p><p>Butterfly <a href="https://butterfly.js.org/posts/21cfbf15/">文档</a></p><p>Butterfly <a href="https://github.com/jerryc127/hexo-theme-butterfly">github项目地址</a></p></blockquote><ul><li>安装</li></ul><p> 在 Hexo 根目录下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br></pre></td></tr></table></figure><ul><li>应用主题</li></ul><p>修改 Hexo 根目录下的<code>_config.yml</code>，把主题改为 butterfly</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure><ul><li>安装渲染器</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><ul><li>升级主题</li></ul><p>升级方法：在主题目录下，运行<code>git pull</code></p><ul><li>配置建议</li></ul><blockquote><p>为了方便升级主题后带来的不便，建议更改一些配置</p></blockquote><p>在 hexo 的根目录创建一个文件<code>_config.butterfly.yml</code> ，并把主题目录下的<code>_config.yml</code>內容复制到<code>_config.butterfly.yml</code> 。</p><p>Hexo 自动合并主题<code>_config.yml</code>和<code>_config.butterfly.yml</code>中的配置。如果存在同名配置，则将使用该配置。<code>_config.butterfly.yml</code>的配置具有高优先级。</p><h2 id="远程部署"><a href="#远程部署" class="headerlink" title="远程部署"></a>远程部署</h2><blockquote><p>建议选择 Github，部署到 Gitee 的时候遇到了一些布局上的小错误，但在 Github 上是没有的，虽然 Github 有时访问不了，但借助一些工具还是可以快速访问和远程部署的</p></blockquote><ul><li>安装部署插件</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h3 id="Gitee-Pages"><a href="#Gitee-Pages" class="headerlink" title="Gitee Pages"></a>Gitee Pages</h3><blockquote><p><a href="https://gitee.com/help/articles/4136#article-header3">Gitee Pages 官方帮助详情说明</a></p></blockquote><ul><li><p>创建 Gitee 账号</p></li><li><p>新建仓库</p><p>公开或者私有都可以</p><ul><li><p>一级域名</p><p>仓库名如果设置成和个人空间地址一样，那么访问地址就是：<code>&lt;个人空间地址名&gt;.gitee.io</code></p></li><li><p>二级域名</p><p>仓库名如果设置成别的，那么访问地址则是：<code>&lt;个人空间地址名&gt;.gitee.io/仓库名</code></p></li></ul></li><li><p>启动 Gitee Pages</p><p>在该仓库页面中点击“服务”&gt;<code>Gitee Pages</code>&gt; 勾选“强制使用<code>HTTPS</code>” &gt; 点击“启动”</p><p><img src="https://gitee.com/xuny999/FigureBed/raw/master/blog_img/202111241058091.png" alt="image-20211124105834989"></p></li></ul><h3 id="Github-Pages"><a href="#Github-Pages" class="headerlink" title="Github Pages"></a>Github Pages</h3><ul><li><p>创建 Github 账号</p></li><li><p>新建仓库</p><ul><li><p>创建一个仓库，<strong>仓库设置为公开</strong>才能免费使用<code>Github Pages</code>服务</p></li><li><p>仓库名必须设置为：<code>&lt;用户名&gt;.github.io</code></p></li><li><p>创建完成后，就可以通过<code>&lt;用户名&gt;.github.io</code>来访问站点</p></li></ul></li></ul><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><ul><li><p>在 Hexo 根目录下的<code>_config.yml</code>添加配置</p><p>可选择一个部署，也可支持双部署</p></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="comment"># Gitee Pages</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://gitee.com/&lt;用户名&gt;/&lt;用户名&gt;.git</span></span><br><span class="line">  <span class="comment"># Github Pages</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/&lt;用户名&gt;/&lt;用户名&gt;.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><ul><li>如果是域名带子目录，还需要多添加一项配置</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://&lt;用户名&gt;.gitee.io/project</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/project</span></span><br></pre></td></tr></table></figure><h3 id="执行部署命令"><a href="#执行部署命令" class="headerlink" title="执行部署命令"></a>执行部署命令</h3><p> 在 Hexo 根目录下执行以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo c</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意</strong></p><ul><li><p>对于 Gitee Pages ，由于不支持自动更新，每次执行命令部署后需要<strong>手动点击更新</strong>，等待更新完成后访问地址即可看到效果。</p><p><img src="https://gitee.com/xuny999/FigureBed/raw/master/blog_img/202111242256722.png" alt="image-20211124225628591"></p><p>如果<strong>看不到效果</strong>的话，<strong>暂停服务</strong>，然后再<strong>重新启动</strong>。</p></li><li><p>对于 GitHub Pages，它支持<strong>自动更新</strong>，无需额外操作，稍等片刻后访问即可。</p></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> Hexo应用笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
